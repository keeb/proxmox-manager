{
  "title": "High Memory",
  "ruleGroup": "infrastructure",
  "folderUID": "afdny0umjbytcb",
  "condition": "C",
  "for": "5m",
  "noDataState": "OK",
  "execErrState": "Error",
  "labels": { "severity": "critical" },
  "annotations": { "summary": "Memory usage above 90% on {{ $labels.instance }}" },
  "data": [
    {
      "refId": "A",
      "relativeTimeRange": { "from": 600, "to": 0 },
      "datasourceUid": "bea14157-8927-407b-8b48-f0cfaa53862d",
      "model": {
        "expr": "(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100",
        "refId": "A"
      }
    },
    {
      "refId": "B",
      "relativeTimeRange": { "from": 600, "to": 0 },
      "datasourceUid": "__expr__",
      "model": { "type": "reduce", "expression": "A", "reducer": "last", "refId": "B" }
    },
    {
      "refId": "C",
      "relativeTimeRange": { "from": 600, "to": 0 },
      "datasourceUid": "__expr__",
      "model": { "type": "threshold", "expression": "B", "conditions": [{ "evaluator": { "type": "gt", "params": [90] } }], "refId": "C" }
    }
  ]
}
